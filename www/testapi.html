<!doctype html>
<html>
<head>
<script src="js/api.js"></script>
<style>
body{
	background: #000;
	color: #FFF;
}
</style>
</head>
<body>
<table>
	<tbody>
		<tr>
			<td>Widget name</td>
			<td><input type="text" id="widget"></td>
		</tr>
		<tr>
			<td>Variable</td>
			<td><input type="text" id="variable"></td>
		</tr>
		<tr>
			<td>Action</td>
			<td>
				<select id="action">
					<option name="get">get</option>
					<option name="set">set</option>
				</select>
			</td>
		</tr>
		<tr>
			<td>Value</td>
			<td><input type="text" id="value"></td>
		</tr>
		<tr>
			<td colspan="2"><input type="button" id="send" value="Query"></td>
		</tr>
	</tbody>
</table>


<script>


var action = document.getElementById('action');
var widget = document.getElementById('widget');
var variable = document.getElementById('variable');
var value = document.getElementById('value');

document.getElementById('send').onclick = function(){
	var comando = {
		'action':action.value,
		'widget':widget.value,
		'variables':variable.value
	};
	
	if(comando['action'] === 'set'){
		comando['variables'] = {};
		comando['variables'][variable.value] = value.value;
	}
	
	API.call(comando, function(input){
		if(typeof input !== 'undefined'){
			if(typeof input[variable.value] !== 'undefined'){
				value.value = input[variable.value];
			}
			else{
				value.value = "";
			}
		}
		else{
			value.value = "";
		}
	});
}


</script>