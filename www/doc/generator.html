<!DOCTYPE html>
<html>
<head>
	<script src="../js/epiceditor/js/epiceditor.min.js"></script>
	<script src="../js/crel2.js"></script>
	<script src="functions.js"></script>
	<script src="doc.js"></script>
</head>
<body>
	
	<div id="list"></div>
	
	<div id="Z"></div>
	
	<input type="button" value="Generate JSON" onclick="recalc_DOC()"></input>
	<br/>
	<textarea id="txt" style="width:100%;height:20em;"></textarea>
	
<script>
	var C = crel2;
	
	function recalc_DOC(){
		document.getElementById("txt").value = JSON.stringify(DOC);
	}
	
	
	var opts = {
		container: 'Z',
		textarea: null,
		basePath: '../js/epiceditor',
		clientSideStorage: true,
		localStorageName: 'epiceditor',
		useNativeFullscreen: true,
		parser: marked,
		theme: {
			base: '/themes/base/epiceditor.css',
			preview: '/themes/preview/github.css',
			editor: '/themes/editor/epic-dark.css'
		},
		button: {
			preview: true,
			fullscreen: true,
			bar: "auto"
		},
		focusOnLoad: false,
		shortcut: {
			modifier: 18,
			fullscreen: 70,
			preview: 80
		},
		autogrow: true
	}
	var editor = new EpicEditor(opts);
	editor.load();
	
	
	
	
	document.getElementById("list").appendChild(recursive_list_fill(DOC));
	
	function recursive_list_fill(doc){
		var obj = C("div");
		
		for(var i = 0; i < types.length; i++){
			var d = doc[types[i]];
			if(d){
				for(var j = 0; j < d.length; j++){
					obj.appendChild(
						C("div", d[j].name, recursive_list_fill(d[j]))
					);
					console.log(obj.childNodes.length);
				}
			}
		}
		return obj;
	}
	
	
	
	
</script>
</body>
</html>