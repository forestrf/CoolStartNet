<!doctype html>
<html>
<head>
<script src="js/api.js"></script>
<style>
body{
	background: #000;
	color: #FFF;
}
</style>
</head>
<body>
<table>
	<tbody>
		<tr>
			<td>Widget Nombre</td>
			<td><input type="text" id="widget"></td>
		</tr>
		<tr>
			<td>Variable</td>
			<td><input type="text" id="variable"></td>
		</tr>
		<tr>
			<td>Acción</td>
			<td>
				<select id="action">
					<option name="get">get</option>
					<option name="set">set</option>
				</select>
			</td>
		</tr>
		<tr>
			<td>Valor</td>
			<td><input type="text" id="valor"></td>
		</tr>
		<tr>
			<td colspan="2"><input type="button" id="enviar" value="Consultar"></td>
		</tr>
	</tbody>
</table>


<script>


g = document.getElementById;

var action = g('action');
var widget = g('widget');
var variable = g('variable');
var valor = g('valor');

D.g('enviar').onclick = function(){
	var comando = {
		'action':action.value,
		'widget':widget.value,
		'variables':variable.value
	};
	
	if(comando['action'] === 'set'){
		comando['variables'] = {};
		comando['variables'][variable.value] = valor.value;
	}
	
	API.call(comando, function(entrada){
		valor.value = entrada[variable.value];
	});
}


</script>